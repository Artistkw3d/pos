<!DOCTYPE html>
<html dir="rtl">
<head>
<meta charset="UTF-8">
<title>ุงููุธุงู ุงููุญุงุณุจู</title>
<style>
body{font-family:Arial;background:#667eea;padding:20px;margin:0}
.container{max-width:1100px;margin:0 auto;background:white;padding:25px;border-radius:12px}
h1{color:#2d3748;margin:0 0 10px;text-align:center}
.btn{background:#e53e3e;color:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;font-size:16px;font-weight:bold}
.tabs{display:flex;gap:8px;margin:20px 0;justify-content:center}
.tab{padding:12px 20px;background:#e2e8f0;border:none;border-radius:8px;cursor:pointer;font-weight:bold}
.tab.active{background:#667eea;color:white}
.section{display:none}
.section.active{display:block}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin:15px 0}
.card{border:2px solid #cbd5e0;padding:15px;border-radius:8px;background:#f7fafc}
.card h3{margin:0 0 12px;font-size:18px}
label{display:block;font-weight:600;margin:8px 0 4px;font-size:14px}
input{width:100%;padding:10px;border:2px solid #cbd5e0;border-radius:6px;font-size:15px}
.total{margin-top:15px;padding-top:12px;border-top:2px solid #4a5568;display:flex;justify-content:space-between;font-size:18px;font-weight:bold}
table{width:100%;border-collapse:collapse}
td{padding:12px;border-bottom:1px solid #e2e8f0}
.blue{color:#3182ce}
.green{color:#38a169}
.red{color:#e53e3e}

@media print{
.no-print{display:none}
#settings_modal{display:none !important}
.section{display:none}
.section.active{display:block;page-break-inside:avoid}
body{background:white;padding:5px;margin:0}
.container{padding:10px;max-width:100%}
h1{font-size:20px;margin:0 0 5px}
h2{font-size:16px;margin:5px 0}
h3{font-size:14px;margin:0 0 6px}
h4{font-size:13px;margin:0 0 5px}
.card{padding:8px;margin-bottom:5px}
.grid{gap:8px;margin:8px 0}
label{font-size:12px;margin:4px 0 2px}
input{padding:4px;font-size:12px}
td{padding:6px;font-size:12px}
.total{margin-top:8px;padding-top:6px;font-size:14px}
#s4 .card{padding:8px}
#s4 .grid{margin:8px 0}
#s4 table{margin:5px 0}
#s4 table tr td{padding:5px}
#s5 .grid{margin-bottom:8px}
#s5 h4{margin-bottom:3px}
#s5 table{margin:0}
#s5 table tr td{padding:5px}
#s5 table tr:last-child td{padding:8px}
#s5 > div:last-child{border-width:3px}
#s5 > div:last-child > div:first-child{padding:8px;font-size:16px}
#s5 > div:last-child > .grid{margin:0}
#s5 > div:last-child > .grid > div{padding:8px}
#status{padding:8px;font-size:13px}
#distribution_status{padding:8px;font-size:13px}
#company_logo{max-height:50px !important}
}
</style>
</head>
<body>

<div class="container">
<div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; border: 2px solid #ffc107;"><strong>๐ ููุงุญุธุฉ:</strong> ุงูุจูุงูุงุช ุงููุงููุฉ ุชุดูู ุฌููุน ุงููุฑูุน</div>
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
<div style="display:flex;align-items:center;gap:15px">
<img id="company_logo" src="" alt="" style="max-height:60px;max-width:100px;display:none">
<div>
<h1 id="company_title">ุงููุธุงู ุงููุญุงุณุจู ๐ฐ๐ผ</h1>
<p style="color:#718096;margin:5px 0">ุงูููุงุฆู ุงููุงููุฉ ุงููุชุฑุงุจุทุฉ</p>
</div>
</div>
<div style="display:flex;gap:8px">
<button class="btn no-print" onclick="showSettings()" style="background:#667eea">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</button>
<button class="btn no-print" onclick="window.print()">ุทุจุงุนุฉ PDF</button>
</div>
</div>

<!-- ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช -->
<div id="settings_modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;padding:20px">
<div style="background:white;max-width:600px;margin:50px auto;padding:25px;border-radius:12px;max-height:80vh;overflow-y:auto">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
<h2 style="margin:0;color:#2d3748">โ๏ธ ุฅุนุฏุงุฏุงุช ุงููุธุงู</h2>
<button onclick="closeSettings()" style="background:#e53e3e;color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:bold">โ ุฅุบูุงู</button>
</div>
<div class="card">
<h3>ูุนูููุงุช ุงูุดุฑูุฉ</h3>
<label>ุนููุงู ุงููุธุงู</label>
<input type="text" id="title_input" placeholder="ุงููุธุงู ุงููุญุงุณุจู ๐ฐ๐ผ" style="margin-bottom:15px">
<label>ุดุนุงุฑ ุงูุดุฑูุฉ (Logo)</label>
<input type="file" id="logo_input" accept="image/*" onchange="loadLogo(this)" style="margin-bottom:10px">
<div id="logo_preview" style="margin-top:10px;text-align:center;display:none">
<img id="preview_img" style="max-width:200px;max-height:100px;border:2px solid #cbd5e0;border-radius:8px;padding:5px">
<div style="margin-top:8px">
<button onclick="removeLogo()" style="background:#e53e3e;color:white;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:13px">๐๏ธ ุญุฐู ุงูุดุนุงุฑ</button>
</div>
</div>
</div>
<div style="margin-top:20px;text-align:center">
<button onclick="saveSettings()" style="background:#38a169;color:white;border:none;padding:12px 30px;border-radius:8px;cursor:pointer;font-weight:bold;font-size:16px">๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
</div>
</div>
</div>

<div style="background:#667eea;color:white;padding:15px;border-radius:8px;text-align:center;margin-bottom:20px">
<div style="font-size:14px">ุตุงูู ุงูุฑุจุญ</div>
<div style="font-size:24px;font-weight:bold" id="profit">0 ุฏ.ู</div>
</div>

<div class="tabs no-print">
<button class="tab active" onclick="showTab(1)">ูก. ุงููุฎุฒูู</button>
<button class="tab" onclick="showTab(2)">ูข. ุจูุงู ุงูุฏุฎู</button>
<button class="tab" onclick="showTab(3)">ูฃ. ุงูููููุฉ</button>
<button class="tab" onclick="showTab(4)">ูค. ุชูุฒูุน ุงูุฃุฑุจุงุญ</button>
<button class="tab" onclick="showTab(5)">ูฅ. ุงูููุฒุงููุฉ</button>
</div>

<div id="s1" class="section active">
<h2 class="blue" style="text-align:center">ูก. ุงููุฎุฒูู ูุงูุชูุงููู</h2>
<div class="grid">
<div class="card">
<h3>ุงููุฎุฒูู</h3>
<label>ูุฎุฒูู ุฃูู ุงููุฏุฉ</label><input type="number" id="i1" value="50000" oninput="calc()">
<label>ุงููุดุชุฑูุงุช</label><input type="number" id="i2" value="200000" oninput="calc()">
<label>ูุฎุฒูู ุขุฎุฑ ุงููุฏุฉ</label><input type="number" id="i3" value="60000" oninput="calc()">
<div class="total"><span>ุชูููุฉ ุงูุจุถุงุนุฉ</span><span class="blue" id="cogs">0</span></div>
</div>
<div class="card">
<h3>ุงูุฅูุฑุงุฏุงุช</h3>
<label>ุฅูุฑุงุฏุงุช ุงููุจูุนุงุช</label><input type="number" id="r1" value="450000" oninput="calc()">
<label>ุฅูุฑุงุฏุงุช ุฃุฎุฑู</label><input type="number" id="r2" value="5000" oninput="calc()">
<div class="total"><span>ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช</span><span class="green" id="rev">0</span></div>
</div>
</div>
<div class="card">
<h3>ุงููุตุฑููุงุช</h3>
<div class="grid">
<div><label>ุงูุฑูุงุชุจ</label><input type="number" id="e1" value="80000" oninput="calc()"></div>
<div><label>ุงูุฅูุฌุงุฑุงุช</label><input type="number" id="e2" value="24000" oninput="calc()"></div>
<div><label>ุงูููุฑุจุงุก</label><input type="number" id="e3" value="12000" oninput="calc()"></div>
<div><label>ุงูุชุณููู</label><input type="number" id="e4" value="15000" oninput="calc()"></div>
<div><label>ุงูุฅููุงู</label><input type="number" id="e5" value="10000" oninput="calc()"></div>
<div><label>ุฃุฎุฑู</label><input type="number" id="e6" value="8000" oninput="calc()"></div>
</div>
<div class="total"><span>ุฅุฌูุงูู ุงููุตุฑููุงุช</span><span class="red" id="exp">0</span></div>
</div>
</div>

<div id="s2" class="section">
<h2 class="green" style="text-align:center">ูข. ุจูุงู ุงูุฏุฎู</h2>
<div style="max-width:600px;margin:0 auto;border:3px solid #38a169;border-radius:8px;overflow:hidden">
<div style="background:#38a169;color:white;padding:15px;text-align:center;font-size:20px;font-weight:bold">ูุงุฆูุฉ ุงูุฏุฎู</div>
<table>
<tr style="background:#c6f6d5"><td><b>ุงูุฅูุฑุงุฏุงุช</b></td><td style="text-align:left"><b id="t1">0</b></td></tr>
<tr style="background:#fed7d7"><td><b>ุชูููุฉ ุงูุจุถุงุนุฉ</b></td><td style="text-align:left"><b id="t2">0</b></td></tr>
<tr style="background:#bee3f8"><td><b>ูุฌูู ุงูุฑุจุญ</b></td><td style="text-align:left"><b id="t3">0</b></td></tr>
<tr style="background:#fed7d7"><td><b>ุงููุตุฑููุงุช</b></td><td style="text-align:left"><b id="t4">0</b></td></tr>
<tr style="background:#38a169;color:white"><td style="padding:18px"><b>ุตุงูู ุงูุฑุจุญ</b></td><td style="text-align:left;padding:18px"><b id="t5">0</b></td></tr>
</table>
</div>
</div>

<div id="s3" class="section">
<h2 style="color:#805ad5;text-align:center">ูฃ. ุงูุชุบูุฑ ูู ุงูููููุฉ</h2>
<div class="grid">
<div class="card">
<h3>ุงูุจูุงูุงุช</h3>
<label>ุฑุฃุณ ุงููุงู ุฃูู ุงููุฏุฉ</label><input type="number" id="q1" value="300000" oninput="calc()">
<label>ุฅุถุงูุงุช</label><input type="number" id="q2" value="50000" oninput="calc()">
<label>ุงููุณุญูุจุงุช</label><input type="number" id="q3" value="20000" oninput="calc()">
</div>
<div class="card">
<h3>ุงูุญุฑูุฉ</h3>
<table style="margin:0">
<tr><td>ุฑุฃุณ ุงููุงู ุฃูู</td><td style="text-align:left"><b id="q4">0</b></td></tr>
<tr><td>ุฅุถุงูุงุช</td><td style="text-align:left;color:#38a169"><b id="q5">0</b></td></tr>
<tr><td>ุตุงูู ุงูุฑุจุญ</td><td style="text-align:left"><b id="q6">0</b></td></tr>
<tr><td>ุงููุณุญูุจุงุช</td><td style="text-align:left;color:#e53e3e"><b id="q7">0</b></td></tr>
<tr style="background:#805ad5;color:white"><td style="padding:15px"><b>ุฑุฃุณ ุงููุงู ุขุฎุฑ</b></td><td style="text-align:left;padding:15px"><b id="q8">0</b></td></tr>
</table>
</div>
</div>
</div>

<div id="s4" class="section">
<h2 style="color:#f59e0b;text-align:center">ูค. ุชูุฒูุน ุงูุฃุฑุจุงุญ ุนูู ุงูุดุฑูุงุก</h2>
<div style="max-width:700px;margin:0 auto">
<div class="card">
<h3>ุจูุงูุงุช ุงูุดุฑูุงุก</h3>
<div class="grid">
<div>
<label>ุนุฏุฏ ุงูุดุฑูุงุก</label>
<input type="number" id="p_count" value="3" min="1" max="10" oninput="updatePartners()">
</div>
<div>
<label>ุตุงูู ุงูุฑุจุญ ุงููุชุงุญ ููุชูุฒูุน</label>
<input type="number" id="p_profit" readonly style="background:#f7fafc;color:#2d3748;font-weight:bold">
</div>
</div>
</div>

<div id="partners_container" style="margin-top:15px">
</div>

<div style="border:3px solid #f59e0b;border-radius:8px;overflow:hidden;margin-top:15px">
<div style="background:#f59e0b;color:white;padding:12px;text-align:center;font-size:18px;font-weight:bold">ููุฎุต ุชูุฒูุน ุงูุฃุฑุจุงุญ</div>
<table id="partners_summary">
</table>
<div style="background:#fef3c7;padding:12px;display:flex;justify-content:space-between;font-weight:bold;border-top:3px solid #f59e0b">
<span>ุฅุฌูุงูู ุงูุฃุฑุจุงุญ ุงูููุฒุนุฉ</span>
<span id="total_distributed">0 ุฏ.ู</span>
</div>
<div id="distribution_status" style="background:#38a169;color:white;padding:12px;text-align:center;font-weight:bold">ูุชูุงุฒู โ</div>
</div>
</div>
</div>

<div id="s5" class="section">
<h2 style="color:#dd6b20;text-align:center">ูฅ. ุงููุฑูุฒ ุงููุงูู</h2>
<div class="grid" style="margin-bottom:15px">
<div class="card">
<h3>ุงูุฃุตูู</h3>
<label>ุงูููุฏ</label><input type="number" id="a1" value="120000" oninput="calc()">
<label>ุงูุฐูู ุงููุฏููุฉ</label><input type="number" id="a2" value="85000" oninput="calc()">
<label>ุงูุฃุตูู ุงูุซุงุจุชุฉ</label><input type="number" id="a3" value="250000" oninput="calc()">
<label>ูุฌูุน ุงูุฅููุงู</label><input type="number" id="a4" value="50000" oninput="calc()">
</div>
<div class="card">
<h3>ุงูุงูุชุฒุงูุงุช</h3>
<label>ุงูููุฑุฏูู</label><input type="number" id="l1" value="45000" oninput="calc()">
<label>ูุฑูุถ ูุตูุฑุฉ</label><input type="number" id="l2" value="30000" oninput="calc()">
<label>ูุฑูุถ ุทูููุฉ</label><input type="number" id="l3" value="100000" oninput="calc()">
</div>
</div>
<div style="border:4px solid #dd6b20;border-radius:8px;overflow:hidden">
<div style="background:#dd6b20;color:white;padding:15px;text-align:center;font-size:20px;font-weight:bold">ุงูููุฒุงููุฉ</div>
<div class="grid">
<div style="padding:15px">
<h4>ุงูุฃุตูู</h4>
<table style="margin:0">
<tr><td>ุงูููุฏ</td><td style="text-align:left"><b id="b1">0</b></td></tr>
<tr><td>ุงูุฐูู ุงููุฏููุฉ</td><td style="text-align:left"><b id="b2">0</b></td></tr>
<tr><td>ุงููุฎุฒูู</td><td style="text-align:left"><b id="b3">0</b></td></tr>
<tr style="background:#fef5e7"><td><b>ุงูุฃุตูู ุงููุชุฏุงููุฉ</b></td><td style="text-align:left"><b id="b4">0</b></td></tr>
<tr><td>ุงูุฃุตูู ุงูุซุงุจุชุฉ</td><td style="text-align:left"><b id="b5">0</b></td></tr>
<tr><td>ูุฌูุน ุงูุฅููุงู</td><td style="text-align:left;color:#e53e3e"><b id="b6">0</b></td></tr>
<tr style="background:#fef5e7"><td><b>ุตุงูู ุงูุซุงุจุชุฉ</b></td><td style="text-align:left"><b id="b7">0</b></td></tr>
<tr style="background:#dd6b20;color:white"><td style="padding:15px"><b>ุฅุฌูุงูู ุงูุฃุตูู</b></td><td style="text-align:left;padding:15px"><b id="b8">0</b></td></tr>
</table>
</div>
<div style="padding:15px;border-right:4px solid #dd6b20">
<h4>ุงูุฎุตูู ูุงูููููุฉ</h4>
<table style="margin:0">
<tr><td>ุงูููุฑุฏูู</td><td style="text-align:left"><b id="b9">0</b></td></tr>
<tr><td>ูุฑูุถ ูุตูุฑุฉ</td><td style="text-align:left"><b id="b10">0</b></td></tr>
<tr style="background:#fef5e7"><td><b>ุงูุงูุชุฒุงูุงุช ุงููุชุฏุงููุฉ</b></td><td style="text-align:left"><b id="b11">0</b></td></tr>
<tr><td>ูุฑูุถ ุทูููุฉ</td><td style="text-align:left"><b id="b12">0</b></td></tr>
<tr style="background:#fef5e7"><td><b>ุฅุฌูุงูู ุงูุงูุชุฒุงูุงุช</b></td><td style="text-align:left"><b id="b13">0</b></td></tr>
<tr><td style="color:#38a169"><b>ุญููู ุงูููููุฉ</b></td><td style="text-align:left;color:#38a169"><b id="b14">0</b></td></tr>
<tr style="background:#dd6b20;color:white"><td style="padding:15px"><b>ุงูุฎุตูู + ุงูููููุฉ</b></td><td style="text-align:left;padding:15px"><b id="b15">0</b></td></tr>
</table>
</div>
</div>
<div id="status" style="background:#38a169;color:white;padding:15px;text-align:center;font-weight:bold">ูุชูุงุฒูุฉ</div>
</div>
</div>

</div>

<script>
function v(id){return parseFloat(document.getElementById(id).value)||0;}
function t(id,val){var el=document.getElementById(id);if(el){el.textContent=val.toLocaleString('ar')+' ุฏ.ู';}}
function calc(){
var i1=v('i1');var i2=v('i2');var i3=v('i3');var r1=v('r1');var r2=v('r2');
var e1=v('e1');var e2=v('e2');var e3=v('e3');var e4=v('e4');var e5=v('e5');var e6=v('e6');
var q1=v('q1');var q2=v('q2');var q3=v('q3');
var a1=v('a1');var a2=v('a2');var a3=v('a3');var a4=v('a4');
var l1=v('l1');var l2=v('l2');var l3=v('l3');
var cogs=i1+i2-i3;var rev=r1+r2;var gross=rev-cogs;var exp=e1+e2+e3+e4+e5+e6;var net=gross-exp;
var eq=q1+q2+net-q3;
var ca=a1+a2+i3;var nf=a3-a4;var ta=ca+nf;
var cl=l1+l2;var tl=cl+l3;var te=tl+eq;
t('cogs',cogs);t('rev',rev);t('exp',exp);
t('t1',rev);t('t2',cogs);t('t3',gross);t('t4',exp);t('t5',net);
t('q4',q1);t('q5',q2);t('q6',net);t('q7',q3);t('q8',eq);
t('b1',a1);t('b2',a2);t('b3',i3);t('b4',ca);t('b5',a3);t('b6',a4);t('b7',nf);t('b8',ta);
t('b9',l1);t('b10',l2);t('b11',cl);t('b12',l3);t('b13',tl);t('b14',eq);t('b15',te);
t('profit',net);
var st=document.getElementById('status');
if(Math.abs(ta-te)<1){st.textContent='โ ูุชูุงุฒูุฉ';st.style.background='#38a169';}
else{st.textContent='โ๏ธ ุบูุฑ ูุชูุงุฒูุฉ';st.style.background='#e53e3e';}
updateDistribution();
}
function showTab(n){
for(var i=1;i<=5;i++){
var s=document.getElementById('s'+i);
if(s){s.classList.remove('active');}
}
var tabs=document.querySelectorAll('.tab');
tabs.forEach(function(tab){tab.classList.remove('active');});
var as=document.getElementById('s'+n);
if(as){as.classList.add('active');}
if(tabs[n-1]){tabs[n-1].classList.add('active');}
}
window.onload=function(){
loadSavedSettings();
calc();
updatePartners();
};

// ุชุญููู ุงูุฅุนุฏุงุฏุงุช ุงููุญููุธุฉ
function loadSavedSettings() {
var savedTitle = localStorage.getItem('company_title');
var savedLogo = localStorage.getItem('company_logo');

if(savedTitle) {
document.getElementById('company_title').textContent = savedTitle;
document.getElementById('title_input').value = savedTitle;
}
if(savedLogo) {
var logoImg = document.getElementById('company_logo');
logoImg.src = savedLogo;
logoImg.style.display = 'block';
}
}

// ุฅุธูุงุฑ ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช
function showSettings() {
document.getElementById('settings_modal').style.display = 'block';
var currentTitle = document.getElementById('company_title').textContent;
document.getElementById('title_input').value = currentTitle;
}

// ุฅุบูุงู ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช
function closeSettings() {
document.getElementById('settings_modal').style.display = 'none';
}

// ุชุญููู ุงูุดุนุงุฑ
function loadLogo(input) {
if (input.files && input.files[0]) {
var reader = new FileReader();
reader.onload = function(e) {
var previewImg = document.getElementById('preview_img');
previewImg.src = e.target.result;
document.getElementById('logo_preview').style.display = 'block';
};
reader.readAsDataURL(input.files[0]);
}
}

// ุญุฐู ุงูุดุนุงุฑ
function removeLogo() {
document.getElementById('logo_input').value = '';
document.getElementById('logo_preview').style.display = 'none';
document.getElementById('company_logo').style.display = 'none';
document.getElementById('company_logo').src = '';
localStorage.removeItem('company_logo');
}

// ุญูุธ ุงูุฅุนุฏุงุฏุงุช
function saveSettings() {
var title = document.getElementById('title_input').value;
var previewImg = document.getElementById('preview_img');

// ุญูุธ ุงูุนููุงู
if(title) {
document.getElementById('company_title').textContent = title;
localStorage.setItem('company_title', title);
}

// ุญูุธ ุงูุดุนุงุฑ
if(previewImg.src && previewImg.src !== window.location.href) {
document.getElementById('company_logo').src = previewImg.src;
document.getElementById('company_logo').style.display = 'block';
localStorage.setItem('company_logo', previewImg.src);
}

alert('โ ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ!');
closeSettings();
}

var partners = [];

function updatePartners() {
var count = parseInt(document.getElementById('p_count').value) || 1;
if(count < 1) count = 1;
if(count > 10) count = 10;
document.getElementById('p_count').value = count;

var container = document.getElementById('partners_container');
container.innerHTML = '';

for(var i = 0; i < count; i++) {
var existing = partners[i] || {name: 'ุดุฑูู ' + (i+1), percentage: Math.floor(100/count)};
partners[i] = existing;

var card = document.createElement('div');
card.className = 'card';
card.innerHTML = `
<div class="grid">
<div>
<label>ุงุณู ุงูุดุฑูู ${i+1}</label>
<input type="text" id="p_name_${i}" value="${existing.name}" oninput="updateDistribution()">
</div>
<div>
<label>ูุณุจุฉ ุงูุฑุจุญ (%)</label>
<input type="number" id="p_percent_${i}" value="${existing.percentage}" min="0" max="100" oninput="updateDistribution()">
</div>
</div>
`;
container.appendChild(card);
}

partners = partners.slice(0, count);
updateDistribution();
}

function updateDistribution() {
var count = parseInt(document.getElementById('p_count').value) || 1;

// ุญูุธ ุจูุงูุงุช ุงูุดุฑูุงุก
for(var i = 0; i < count; i++) {
var nameEl = document.getElementById('p_name_' + i);
var percentEl = document.getElementById('p_percent_' + i);
if(nameEl && percentEl) {
partners[i] = {
name: nameEl.value,
percentage: parseFloat(percentEl.value) || 0
};
}
}

// ุญุณุงุจ ุตุงูู ุงูุฑุจุญ
var i1=v('i1');var i2=v('i2');var i3=v('i3');var r1=v('r1');var r2=v('r2');
var e1=v('e1');var e2=v('e2');var e3=v('e3');var e4=v('e4');var e5=v('e5');var e6=v('e6');
var cogs=i1+i2-i3;var rev=r1+r2;var gross=rev-cogs;var exp=e1+e2+e3+e4+e5+e6;var net=gross-exp;

var profitEl = document.getElementById('p_profit');
if(profitEl) {
profitEl.value = net.toLocaleString('ar') + ' ุฏ.ู';
}

// ุฅูุดุงุก ุฌุฏูู ุงูุชูุฒูุน
var table = document.getElementById('partners_summary');
table.innerHTML = '';

var totalPercent = 0;
var totalAmount = 0;

for(var i = 0; i < partners.length; i++) {
var p = partners[i];
var amount = (net * p.percentage / 100);
totalPercent += p.percentage;
totalAmount += amount;

var row = document.createElement('tr');
row.style.background = i % 2 === 0 ? '#fef3c7' : 'white';
row.innerHTML = `
<td><b>${p.name}</b></td>
<td style="text-align:center">${p.percentage.toFixed(1)}%</td>
<td style="text-align:left;color:#38a169"><b>${amount.toLocaleString('ar', {minimumFractionDigits: 2, maximumFractionDigits: 2})} ุฏ.ู</b></td>
`;
table.appendChild(row);
}

// ุฅุฌูุงูู ุงูุชูุฒูุน
var totalEl = document.getElementById('total_distributed');
if(totalEl) {
totalEl.textContent = totalAmount.toLocaleString('ar', {minimumFractionDigits: 2, maximumFractionDigits: 2}) + ' ุฏ.ู';
}

// ุญุงูุฉ ุงูุชูุฒูุน
var statusEl = document.getElementById('distribution_status');
if(statusEl) {
if(Math.abs(totalPercent - 100) < 0.1 && Math.abs(totalAmount - net) < 1) {
statusEl.textContent = 'โ ุงูุชูุฒูุน ูุชูุงุฒู (' + totalPercent.toFixed(1) + '%)';
statusEl.style.background = '#38a169';
} else {
statusEl.textContent = 'โ๏ธ ูุฌููุน ุงููุณุจ = ' + totalPercent.toFixed(1) + '% (ูุฌุจ ุฃู ูููู 100%)';
statusEl.style.background = '#e53e3e';
}
}
}

</script>
</body>
</html>
